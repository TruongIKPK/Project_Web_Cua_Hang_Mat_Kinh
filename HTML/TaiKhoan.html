<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tài Khoản</title>
    <link rel="icon" href="../Acsset/LOGO/Logo.png">
    <link rel="stylesheet" href="../bootstrap-5.3.2-dist/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../bootstrap-5.3.2-dist/slick-1.8.1/slick/slick.css">
    <link rel="stylesheet" type="text/css" href="../bootstrap-5.3.2-dist/slick-1.8.1/slick/slick-theme.css">
    <script src="../bootstrap-5.3.2-dist/js/bootstrap.bundle.min.js"></script>
    <script src="../bootstrap-5.3.2-dist/jquery-3.7.1.min.js"></script>
    <script src="../bootstrap-5.3.2-dist/slick-1.8.1/slick/slick.js"></script>
    <link rel="stylesheet" href="../CSS/TaiKhoan.css">
    <link rel="stylesheet" href="../CSS/TongThe_style.css"> 
</head>
<body>
    <div class="fixed-top">
        <nav class="navbar navbar-expand-md" id="header">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <a href="../HTML/TrangChu.html" class="navbar-brand"><img src="../Acsset/LOGO/Logo.png" alt="logo" id="logo"></a>
                <form action="" class="d-flex">
                    <input type="text" class="form-control me-2 hide-on-mobile" placeholder="Tìm gọng kính, kính mát, tròng kính..." id="search">
                    <button class="btn"><img src="../Acsset/ICON/bx-search.svg" alt=""></button>
                </form>
                <a href="../HTML/HeThongCuaHang.html" class="nav-link"><img src="../Acsset/ICON/bx-store-alt.svg" alt="home"><span class="hide-on-mobile">Hệ thống cửa hàng EYE Y-T</span> </a>
                <div><img src="../Acsset/ICON/bx-user.svg" alt="user"> <a href="../HTML/TaiKhoan.html" class="hide-on-mobile dangnhap">Đăng nhập </a><span class="hide-on-mobile ">|</span><a href="../HTML/TaiKhoan.html" class="hide-on-mobile dangnhap"  id="dangKy"> Đăng ký</a></div>
                <a href="../HTML/GioHang.html" class="nav-link "><img src="../Acsset/ICON/bx-cart.svg" alt="cart"><span class="hide-on-mobile">Giỏ hàng</span></a>
            </div>
        </nav>
        <nav class="navbar navbar-expand-md bg-light">
            <div class="container-fluid ">
                <div class="collapse navbar-collapse" id="mynavbar">
                    <ul class="navbar-nav me-auto ms-5">
                        <li class="nav-item"><a href="../HTML/DSSanPham..html" class="nav-link">Gọng kính</a></li>
                        <li class="nav-item"><a href="../HTML/DSSanPham..html" class="nav-link">Kính mát</a></li>
                        <li class="nav-item"><a href="../HTML/DSSanPham..html" class="nav-link">Kính áp tròng</a></li>
                        <li class="nav-item"><a href="../HTML/DSSanPham..html" class="nav-link">Thương hiệu</a></li>
                        <li class="nav-item"><a href="../HTML/TrangBlog.html" class="nav-link">Blogs</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
<main class="">
    <div id="form">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="false">ĐĂNG NHẬP</button>
            </li>
            <span id="pc">|</span>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="true">ĐĂNG KÝ</button>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">                
            <div class="tab-pane fade " id="register" role="tabpanel" aria-labelledby="register-tab">
                <form>
                    <div class="mb-3">
                        <input type="text" class="form-control" id="registerName6" placeholder="Họ tên">
                        <span id="errhoten"></span>
                    </div>
                    <div class="mb-3">
                        <div class="row">
                            <div class="col-6">
                                <input type="text" class="form-control" id="sDT" aria-describedby="emailHelp" placeholder="Số điện thoại">
                                <span id="span_sDT"></span>
                            </div>
                            <div class="col-6">
                                <select name="" id="gioitinh" class="form-select">
                                    <option value="">Chọn giới tính</option>
                                    <option value="">Nam</option>
                                    <option value="">Nữ</option>
                                    <option value="">Khác</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" id="email12" placeholder="Email">
                        <span id="errEmail1"></span>
                    </div>
                    <div class="mb-3">
                        <div class="row">
                            <div class="col-6">
                                <input type="password" class="form-control" id="registerPwd2" aria-describedby="emailHelp" placeholder="Mật khẩu">
                                <span id="errPwd1"></span>
                            </div>
                            <div class="col-6">
                                <input type="password" class="form-control" id="registerPwd1" aria-describedby="emailHelp" placeholder="Nhập lại mật khẩu">
                                <span id="errPwd2"></span>
                            </div> 
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="row">
                            <div class="col-6">
                                <select class="form-select mb-3" id="city" aria-label=".form-select">
                                    <option value="">Chọn thành phố</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <select class="form-select mb-3" id="district" aria-label=".form-select">
                                    <option value="" selected>Chọn quận huyện</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <select class="form-select" id="ward" aria-label=".form-select">
                                    <option value="" selected>Chọn phường xã</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" id="registerName1" placeholder="Địa chỉ">
                    </div>
                    <div class="mb-3">
                        <input type="date" class="form-control" id="registerName2" placeholder="Chọn ngày (dd/mm/yyyy)">
                        <span id="spanNgaySinh"></span>
                    </div>
                    <div class="mb-3">
                    <label for="" class="form-label text-secondary">This site is protected by reCAPTCHA and the Google Privacy Policy and Terms of Service apply.
                    </label>
                    <label for="" class="form-label text-secondary"> <input type="checkbox"> Tôi đã đọc và đồng ý với <span id="chinhsach">CHÍNH SÁCH</span> của chương trình</label>
                    </div>
                    <div class="row">
                        <div class="col-5">
                            <button id="logup" type="submit" class="btn form-control text-light avtive">ĐĂNG KÝ</button>
                        </div>
                        <div class="col-7 cdk">
                            Bạn đã có tài khoản? <a href="">Đăng nhập ngay</a>
                        </div>
                    </div> 
                </form>
            </div>
            <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
                <form>
                    <div class="mb-3">
                        <input type="email" class="form-control" id="loginEmail1" aria-describedby="emailHelp" placeholder="Email">
                        <span id="erremail"></span>
                    </div>
                    <div class="mb-3">
                        <input type="password" class="form-control" id="loginPassword5" placeholder="Mật khẩu">
                        <span id="errmatkhau"></span>
                    </div>
                    <label for="" class="form-label text-secondary" id="note">This site is protected by reCAPTCHA and the Google Privacy Policy and Terms of Service apply.</label>
                    <div class="mb-3">
                        <div class="row">
                            <div class="col-4">
                                <button id="login1" type="submit" class="btn form-control text-light ">ĐĂNG NHẬP</button>
                            </div>
                            <div class="col-8">
                                <div class="row">
                                    <div class="col" id="qmk">
                                        Bạn quên mật khẩu? <a href="">Quên mật khẩu?</a>
                                    </div>
                                </div>
                                <div class="row"> 
                                    <div class="col cdk" id="chuacotaikhoan">
                                        Bạn chưa có tài khoản? <a href="">Đăng ký</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div> 
    </div>
</main>

<footer>
    <div class="container-fluid text-light">
        <div class="row">
            <div class="col-md-3 mt-3">
                <h5>THÔNG TIN LIÊN HỆ</h5>
                <p>Địa chỉ: 12 Nguyễn Văn Bảo, Phường 4, Gò Vấp, Thành phố Hồ Chí Minh, Việt Nam</p>
                <p>Số điện thoại: 0377200300</p>
                <p>Email: yandteyes@gmail.com</p>
            </div>
            <div class="col-md-3 mt-3">
                <h5>THEO DÕI CHÚNG TÔI</h5>
                <ul id="lien_he" class="list-unstyled">
                    <li><a href="https://www.facebook.com/IKPKTRUONG/"><img src="../Acsset/ICON/logo-facebook.svg" alt="Facebook"></a></li>
                    <li><a href="https://www.facebook.com/IKPKTRUONG/"><img src="../Acsset/ICON/logo-instagram.svg" alt="Instagram"></a></li>
                    <li><a href="https://www.facebook.com/IKPKTRUONG/"><img src="../Acsset/ICON/icon_tiktok.svg" alt="Tiktok"></a></li>
                </ul>
            </div>

            <div class="col-md-3 mt-3">
                <h5>CHÍNH SÁCH</h5>
                <ul id="chinh-sach" class="list-unstyled">
                    <li class="mt-2"><a href="../HTML/DieuKhoanDichVu.html">Điều khoản dịch vụ</a></li>
                    <li class="mt-2"><a href="../HTML/ChinhSachThanhToan.html">Chính sách thanh toán</a></li>
                    <li class="mt-2"><a href="../HTML/ChinhSachBaoHanh.html">Chính sách bảo hành</a></li>
                    <li class="mt-2"><a href="../HTML/ChinhSachDoiTra.html"">Chính sách đổi trả</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul id="sitemap" class="list-unstyled">
                    <li class="mt-3"><a href="../HTML/sitemap.html">Sitemap</a></li>
                    <li class="mt-3"><a href="../HTML/GioiThieuThanhVien.html"">Giới thiệu thành viên thực hiện</a></li>
                    <li class="mt-3"><a href="../HTML/GioiThieu.html">Giới thiệu về website</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div id="copyright" class="container-fluid text-center py-2">
    <p>Copyright © 2024 EYE-YT. All Rights Reserved.</p>
</div>
<script src="../JS/TaiKhoan.js"></script>
<script src="../bootstrap-5.3.2-dist/js/axios.min.js"></script>
<script>var citis = document.getElementById("city");
    var districts = document.getElementById("district");
    var wards = document.getElementById("ward");
    var Parameter = {
    url: "../Acsset/data.json", 
    method: "GET", 
    responseType: "application/json", 
    };
    var promise = axios(Parameter);
    promise.then(function (result) {
    renderCity(result.data);
    });
    
    function renderCity(data) {
    for (const x of data) {
    citis.options[citis.options.length] = new Option(x.Name, x.Id);
    }
    citis.onchange = function () {
    district.length = 1;
    ward.length = 1;
    if(this.value != ""){
    const result = data.filter(n => n.Id === this.value);
    
    for (const k of result[0].Districts) {
        district.options[district.options.length] = new Option(k.Name, k.Id);
    }
    }
    };
    district.onchange = function () {
    ward.length = 1;
    const dataCity = data.filter((n) => n.Id === citis.value);
    if (this.value != "") {
    const dataWards = dataCity[0].Districts.filter(n => n.Id === this.value)[0].Wards;
    
    for (const w of dataWards) {
        wards.options[wards.options.length] = new Option(w.Name, w.Id);
    }
    }
    };
    }
    </script>
    <script>
        $(document).ready(function(){
            $("#chuacotaikhoan").click(function(event) {
                event.preventDefault(); 
                $('#login').removeClass("show active");
                $('#login-tab').removeClass("active");
                $('#register').addClass("show active");
                $('#register-tab').addClass("active");
            });
        });
        function KiemTraEmail(){
            let reg = /^[A-Za-z][A-Za-z0-9]+\@[a-z]+\.[a-z]+$/;
            if($("#loginEmail1").val() == "" || $("#loginEmail1").val() == null){
                $("#erremail").show();
                $("#erremail").text("Không được rỗng");
                $("#erremail").addClass("text-danger");
                return false;
            }
            
           if(!reg.test($("#loginEmail1").val())){
                $("#erremail").show();
                $("#erremail").html("Sai định dạng của email");
                $("#erremail").addClass("text-danger");
                return false;
            }
        
            $("#erremail").hide();
            return true;
        }
        $("#loginEmail1").blur(function(){
            KiemTraEmail();
        });
        function KiemTraMatKhau(){
            let reg = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{6,20}$/;
            if($("#loginPassword5").val() == "" || $("#loginPassword5").val() == null){
                $("#errmatkhau").show();
                $("#errmatkhau").text("Không được rỗng");
                $("#errmatkhau").addClass("text-danger");
                return false;
            }
            
           if(!reg.test($("#loginPassword5").val())){
                $("#errmatkhau").show();
                $("#errmatkhau").html("Phải có ít nhất 1 kí tự thường 1 ký tự  hoa 1 ký tự đặt biệt và 1 số và tối thiểu là 6 và tối đa là 20");
                $("#errmatkhau").addClass("text-danger");
                return false;
            }
        
            $("#errmatkhau").hide();
            return true;
        }
        $("#loginPassword5").blur(function(){
            KiemTraMatKhau();
        });
        function dangNhap(){
            if(KiemTraEmail() && KiemTraMatKhau()){
                var savedAccount = localStorage.getItem("account");
                if (savedAccount) {
                    savedAccount = JSON.parse(savedAccount);
                    if ($("#loginEmail1").val() === savedAccount.email && $("#loginPassword5").val() === savedAccount.password) {
                        alert("Đăng nhập thành công");
                    } else {
                        alert("Email hoặc mật khẩu không đúng");
                    }
                } else {
                    alert("Không tìm thấy thông tin tài khoản");
                }
            }else{
                alert("Vui lòng điền đầy đủ thông tin");
            }
        }
        $("#login1").click(function(){
            dangNhap();
        });
        
        function KiemTraHoTen(){
            let reg = /^([A-Z][a-zA-Z]+[\s]?)*$/;
            if($("#registerName6").val() == "" || $("#registerName6").val() == null){
                $("#errhoten").show();
                $("#errhoten").text("Không được rỗng");
                $("#errhoten").addClass("text-danger");
                return false;
            }
            
           if(!reg.test($("#registerName6").val())){
                $("#errhoten").show();
                $("#errhoten").html("Họ tên chữ đầu tiên viết hoa");
                $("#errhoten").addClass("text-danger");
                return false;
            }
        
            $("#errhoten").hide();
            return true;
        }
        $("#registerName6").blur(function(){
            KiemTraHoTen();
        });
        function KiemTraLoiSDT1(){
            let reg = /^0[0-9]{9}$/;
            if($("#sDT").val() == "" || $("#sDT").val() == null){
                $("#span_sDT").show();
                $("#span_sDT").text("Không được rỗng");
                $("#span_sDT").addClass("text-danger");
                return false;
            }
            
           if(!reg.test($("#sDT").val())){
                $("#span_sDT").show();
                $("#span_sDT").html("Phải đủ 10 số và bắt đầu là số 0");
                $("#span_sDT").addClass("text-danger");
                return false;
            }
        
            $("#span_sDT").hide();
            return true;
        }
        $("#sDT").blur(function(){
            KiemTraLoiSDT1();
        });
        function KiemTraLoiEmail2(){
            let reg = /^[A-Za-z][A-Za-z0-9]+\@[a-z]+\.[a-z]+$/;
            if($("#email12").val() == "" || $("#email12").val() == null){
                $("#errEmail1").show();
                $("#errEmail1").text("Không được rỗng");
                $("#errEmail1").addClass("text-danger");
                return false;
            }
            
           if(!reg.test($("#email12").val())){
                $("#errEmail1").show();
                $("#errEmail1").html("Sai định dạng của email");
                $("#errEmail1").addClass("text-danger");
                return false;
            }
        
            $("#errEmail1").hide();
            return true;
        }
        $("#email12").blur(function(){
            KiemTraLoiEmail2();
        });

        function KiemTraMatKhau1(){
            let reg = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{6,20}$/;
            if($("#registerPwd2").val() == "" || $("#registerPwd2").val() == null){
                $("#errPwd1").show();
                $("#errPwd1").text("Không được rỗng");
                $("#errPwd1").addClass("text-danger");
                return false;
            }
            
           if(!reg.test($("#registerPwd2").val())){
                $("#errPwd1").show();
                $("#errPwd1").html("Phải có ít nhất 1 kí tự thường 1 ký tự  hoa 1 ký tự đặt biệt và 1 số và tối thiểu là 6 và tối đa là 20");
                $("#errPwd1").addClass("text-danger");
                return false;
            }
        
            $("#errPwd1").hide();
            return true;
        }
        $("#registerPwd2").blur(function(){
            KiemTraMatKhau1();
        });
        function KiemTraMatKhau2(){
            if($("#registerPwd1").val() == "" || $("#registerPwd1").val() == null){
                $("#errPwd2").show();
                $("#errPwd2").text("Không được rỗng");
                $("#errPwd2").addClass("text-danger");
                return false;
            }
            
           if($("#registerPwd1").val() != $("#registerPwd2").val()){
                $("#errPwd2").show();
                $("#errPwd2").html("Không khớp");
                $("#errPwd2").addClass("text-danger");
                return false;
            }
        
            $("#errPwd2").hide();
            return true;
        }
        $("#registerPwd1").blur(function(){
            KiemTraMatKhau2();
        });
        function KiemTraNgaySinh(){
            let hienTai =new Date();
            let ngaySinh_ = new Date($("#registerName2").val());
            let age = hienTai.getFullYear() - ngaySinh_.getFullYear();
            if($("#registerName2").val() == "" || $("#registerName2").val() == null){
                $("#spanNgaySinh").show();
                $("#spanNgaySinh").text("Không được rỗng");
                $("#spanNgaySinh").addClass("text-danger");
                return false;
            }
            
           if(age <= 0){
                $("#spanNgaySinh").show();
                $("#spanNgaySinh").html("Trước ngày hiện tại");
                $("#spanNgaySinh").addClass("text-danger");
                return false;
            }
        
            $("#spanNgaySinh").hide();
            return true;
        }
        $("#registerName2").blur(function(){
            KiemTraNgaySinh();
        });
        $("#logup").click(function() {  
            if(KiemTraHoTen() && KiemTraLoiEmail2() && KiemTraLoiSDT1() && KiemTraMatKhau1() && KiemTraMatKhau2() && KiemTraNgaySinh()){
                let name = $("#registerName6").val();
                let gioitinh = $("#gioitinh").val();
                let phone = $("#sDT").val();
                let email = $("#email12").val();
                let password = $("#registerPwd1").val();
                let address =  $("#city").val(); + $("#district").val() + $("#ward").val() + $("#registerName1").val();
                let birthday = $("#registerName2").val();
                let account = {
                    name: name,
                    gioitinh: gioitinh,
                    phone: phone,
                    email: email,
                    password: password,
                    address: address,
                    birthday: birthday
                };
                localStorage.setItem("account", JSON.stringify(account));
                alert("Đăng ký thành công!");
            }else{
                alert("Vui lòng điền đầy đủ thông tin");
            }
        });
    </script>
</body>
</html>